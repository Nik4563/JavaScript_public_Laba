<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Настройки интерфейса</title>
    <style>
        body {
            transition: background-color 0.5s ease, font-size 0.3s ease;
        }

        h2 {
            text-align: center;
        }

        #settingsForm {
            display: flex;
            flex-direction: column;
            max-width: 600px;
            margin: auto;
        }

        #settingsForm div {
            display: flex;
            margin-bottom: 10px;
            align-items: center;
        }

        #settingsForm label {
            width: 30%;
        }

        .radio-group {
            display: flex;
            gap: 15px;
        }
    </style>
</head>
<body>
    <h2>Привет!</h2>

    <form id="settingsForm">
        <div>
            <label for="bgColor">Цвет фона:</label>
            <select id="bgColor" name="bgColor">
                <option value="#ffffff">белый</option>
                <option value="#f0f0f0">светло-серый</option>
                <option value="#F5F5DC">бежевый</option>
            </select>
        </div>

        <div>
            <label>Размер шрифта:</label>
            <div class="radio-group">
                <label><input type="radio" name="fontSize" value="14px">14px</label>
                <label><input type="radio" name="fontSize" value="16px" checked>16px</label>
                <label><input type="radio" name="fontSize" value="18px">18px</label>
            </div>
        </div>

        <div>
            <label for="username">Приветствие:</label>
            <input type="text" id="username" name="username" placeholder="Ваше имя">
        </div>

        <button type="submit">Применить и сохранить</button>
    </form>

    <script>
        function setCookie(name, value, days) {
            const date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            const expires = date.toUTCString();
            document.cookie = name + "=" + value + ";expires=" + expires + ";path=/";
        }

        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        const form = document.querySelector("#settingsForm");
        const helloHeading = document.querySelector("h2");
        const body = document.body;
        const bgSelect = document.getElementById("bgColor");
        const usernameInput = document.getElementById("username");

        form.addEventListener('submit', (event) => {
            event.preventDefault();

            const bgColor = bgSelect.value;
            const fontSize = document.querySelector('input[name="fontSize"]:checked').value;
            const username = usernameInput.value.trim();

            body.style.backgroundColor = bgColor;
            body.style.fontSize = fontSize;
            helloHeading.textContent = username ? `Привет, ${username}!` : "Привет!";

            setCookie('bgColor', bgColor, 30);
            setCookie('fontSize', fontSize, 30);
            setCookie('username', username, 30);
        });

        const savedBg = getCookie('bgColor');
        const savedFont = getCookie('fontSize');
        const savedName = getCookie('username');

        if (savedBg) {
            body.style.backgroundColor = savedBg;
            bgSelect.value = savedBg;
        }

        if (savedFont) {
            body.style.fontSize = savedFont;
            const radio = document.querySelector(`input[name="fontSize"][value="${savedFont}"]`);
            if (radio) radio.checked = true;
        }

        if (savedName) {
            usernameInput.value = savedName;
            helloHeading.textContent = `Привет, ${savedName}!`;
        }
    </script>
</body>
</html>